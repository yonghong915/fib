<?xml version="1.0" encoding="UTF-8"?>
<message-bean-mapping id="HVPS_142MappingOut" source-type="message-bean" target-type="map">
<mapping type="value" to="serviceId">processCommunicationEvent</mapping>
<mapping type="value-mapping" from="checkEscortFlag" to="checkEscortFlag"/> <!--核押验签结果 -->
<mapping type="value" to="communicationEventTypeId">MESSAGE_IN_COMM</mapping>
<mapping type="value" to="productId">G90000001</mapping> 
<mapping type="value-mapping" from="MsgHeader.MesgType" to="contentMimeTypeId"></mapping><!-- 报文类型代码-->
	<!-- 报文头 -->
	<mapping type="value-mapping" from="MsgHeader.OrigSender" to="extendMap.origSender"></mapping><!-- 报文发起人，14位 不足则后补空格 -->
  	<mapping type="value-mapping" from="MsgHeader.OrigSenderSID" to="extendMap.origSenderSID"></mapping><!-- 发送系统号  BEPS-->
	<mapping type="value-mapping" from="MsgHeader.OrigReceiver" to="extendMap.origReceiver"></mapping><!-- 报文接收人 -->
  	<mapping type="value-mapping" from="MsgHeader.OrigReceiverSID" to="extendMap.origReceiverSID"></mapping> <!--接收系统号 BEPS-->
	<mapping type="value-mapping" from="MsgHeader.OrigSendDate" to="extendMap.origSendDate" ></mapping><!-- 报文发起日期20100501 -->
  	<mapping type="value-mapping" from="MsgHeader.OrigSendTime" to="extendMap.origSendTime"></mapping><!-- 报文发起时间094508-->
  	<mapping type="value-mapping" from="MsgHeader.StructType" to="extendMap.structType"></mapping><!-- 报文格式 -->
	<mapping type="value-mapping" from="MsgHeader.MesgID" to="extendMap.mesgID" ></mapping><!-- 通信级标志号 -->
	<mapping type="value-mapping" from="MsgHeader.MesgRefID" to="extendMap.mesgRefID"></mapping><!--通讯级参考号-->
  	<mapping type="value-mapping" from="MsgHeader.MesgPriority" to="extendMap.mesgPriority"></mapping><!-- 报文优先级-->
	<mapping type="value-mapping" from="MsgHeader.MesgDirection" to="extendMap.mesgDirection"></mapping><!--报文传输方向 -->
    <mapping type="value-mapping" from="MsgHeader.Reserve" to="extendMap.Reserve"></mapping><!--保留域-->

	<!-- 报文体 begin-->
	<!-- 业务头 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.MessageIdentification" to="subject"/><!-- 报文标识号 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.CreationDateTime" to="extendMap.CreationDateTime"/><!-- 报文发送时间 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.InstructingDirectParty" to="extendMap.InstructingDirectParty"/><!-- 发起直接参与机构-->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.InstructingParty" to="partyIdFrom"/><!--发起参与机构 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.InstructedDirectParty" to="extendMap.InstructedDirectParty"/><!-- 接收直接参与机构 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.InstructedParty" to="partyIdTo"/><!-- 接收参与机构 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.InstructedParty" to="InstructedParty"/><!-- 接收参与机构 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.SystemCode" to="prodCatalogId"/><!-- 系统编号 -->
	<mapping type="value-mapping" from="HVPS_142_Out.GrpHdr.Remark" to="extendMap.remark"/><!-- 备注 -->

	<!-- 报文体 -->
	<mapping type="value-mapping" to="extendMap.paymentMethodInfo.accountName" from="HVPS_142_Out.Name"></mapping><!-- 付款人名称 -->
	<mapping type="value-mapping" to="extendMap.paymentMethodInfo.accountNumber" from="HVPS_142_Out.Identification"></mapping><!-- 付款人账号 -->
	<mapping type="value-mapping" to="extendMap.paymentMethodInfo.accBankCode" from="HVPS_142_Out.Issuer"></mapping><!-- 付款人开户行行号 -->
	<mapping type="value-mapping" to="extendMap.paymentMethodInfo.clearingBankCode" from="HVPS_142_Out.MemberIdentification"></mapping><!-- 付款清算行行号 -->
	<mapping type="value-mapping" to="extendMap.paymentMethodInfo.bankCode" from="HVPS_142_Out.Identification2"></mapping><!-- 付款行行号 -->
	<mapping type="value-mapping" to="extendMap.disbursement.clearingBankCode" from="HVPS_142_Out.MemberIdentification2"></mapping><!-- 收款清算行行号 -->
	<mapping type="value-mapping" to="extendMap.disbursement.bankCode" from="HVPS_142_Out.Identification3"></mapping><!-- 收款行行号 -->
	<mapping type="value-mapping" to="extendMap.disbursement.accountName" from="HVPS_142_Out.Name2"></mapping><!-- 收款人名称 -->
	<mapping type="value-mapping" to="extendMap.disbursement.accountNumber" from="HVPS_142_Out.Identification4"></mapping><!-- 收款人账号 -->
	<mapping type="value-mapping" to="extendMap.disbursement.accBankCode" from="HVPS_142_Out.Issuer2"></mapping><!-- 收款人开户行行号 -->

	<mapping type="value-mapping" to="extendMap.currencyCategory" from="HVPS_142_Out.CurrencyType"></mapping><!-- 币种 -->
	<mapping type="value-mapping" to="extendMap.transactionSum" from="HVPS_142_Out.Amount"></mapping><!-- 货币符号、金额 -->
	<mapping type="value-mapping" to="extendMap.transactionTypeCode" from="HVPS_142_Out.Proprietary"></mapping><!-- 业务类型编码 -->
	<mapping type="value-mapping" to="extendMap.transactionCategory" from="HVPS_142_Out.Proprietary2"></mapping><!-- 业务种类编码 -->
	<mapping type="value-mapping" to="extendMap.noticeType" from="HVPS_142_Out.NoticeType"></mapping><!-- 通知类型 -->
	<mapping type="value-mapping" to="extendMap.specialBankCode" from="HVPS_142_Out.MemberIdentification3"></mapping><!-- 特许参与者行号 -->
	<mapping type="value-mapping" to="extendMap.originalInstructingParty" from="HVPS_142_Out.MemberIdentification3"></mapping><!-- 原发起参与机构 -->
	<mapping type="value-mapping" to="extendMap.originalMessageIdentification" from="HVPS_142_Out.OriginalMessageIdentification"></mapping><!--原即时转账报文标识号 -->
	<mapping type="value-mapping" to="extendMap.transactionBatch" from="HVPS_142_Out.TransactionBatch"></mapping><!-- 交易批次号 -->

	<manual-mapping> <![CDATA[
		import java.util.Map;
		import java.util.ArrayList;
		import java.util.List;
		import java.util.HashMap;

		//根据业务类型和种类组装productId
		String busType = sourceBean.HVPS_142_Out.Proprietary;
		String busCat = sourceBean.HVPS_142_Out.Proprietary2;
		String productId = busType+busCat;

		Map extendMap = target.get("extendMap");
		extendMap.put("productId",productId);

		]]> </manual-mapping>
</message-bean-mapping>

